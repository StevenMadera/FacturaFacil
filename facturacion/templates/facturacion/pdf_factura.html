<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Factura #{{ factura.numero }}</title>
    <style>
        body { font-family: Arial, sans-serif; font-size: 13px; }
        .header { background: #0d6efd; color: #fff; padding: 10px; }
        .datos { margin-bottom: 20px; }
        .tabla { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        .tabla th, .tabla td { border: 1px solid #ccc; padding: 6px; text-align: left; }
        .tabla th { background: #f2f2f2; }
        .totales { float: right; width: 250px; }
        .totales td { padding: 4px; }
    </style>
</head>
<body>
    <div class="header">
        <h2>Factura Electrónica #{{ factura.numero }}</h2>
    </div>
    <div class="datos">
        <strong>Cliente:</strong> {{ factura.cliente.nombre }}<br>
        <strong>Dirección:</strong> {{ factura.cliente.direccion }}<br>
        <strong>Correo:</strong> {{ factura.cliente.email }}<br>
        <strong>Teléfono:</strong> {{ factura.cliente.telefono }}<br>
        <strong>Fecha de emisión:</strong> {{ factura.fecha|date:"d/m/Y" }}<br>
        <strong>Estado:</strong> {% if factura.pagada %}Pagada{% else %}Pendiente{% endif %}<br>
    </div>
    <table class="tabla">
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio Unitario</th>
                <th>Impuesto (%)</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for d in detalles %}
            <tr>
                <td>{{ d.producto.nombre }}</td>
                <td>{{ d.cantidad }}</td>
                <td>${{ d.precio_unitario|floatformat:2 }}</td>
                <td>{{ d.impuesto|floatformat:2 }}%</td>
                <td>${{ d.subtotal|floatformat:2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <table class="totales">
        <tr>
            <td><strong>Subtotal</strong></td>
            <td>${{ factura.subtotal|floatformat:2 }}</td>
        </tr>
        <tr>
            <td><strong>Impuestos</strong></td>
            <td>${{ factura.impuestos|floatformat:2 }}</td>
        </tr>
        <tr>
            <td><strong>Total</strong></td>
            <td><strong>${{ factura.total|floatformat:2 }}</strong></td>
        </tr>
    </table>
</body>
</html>
